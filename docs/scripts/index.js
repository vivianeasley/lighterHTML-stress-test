(()=>{let f$=Object.hasOwnProperty,h$={},j$,k$=a$=>{let b$=h$[a$];return b$||(b$=h$[a$]={exports:{}},j$[a$](b$.exports,b$)),b$.exports},l$=a$=>{if(a$&&a$.__esModule)return a$;let b$={};for(let c$ in a$)f$.call(a$,c$)&&(b$[c$]=a$[c$]);return b$.default=a$,b$},p$=a$=>l$(k$(a$));j$={17(){function w(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if("production"!==process.env.NODE_ENV){var j=yc[a],i=j?"function"==typeof j?j.apply(null,c):j:"unknown error nr: "+a;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+a+(c.length?" "+c.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function L(a){return!!a&&!!a[t]}function K(a){return!!a&&(function(b){if(!b||"object"!=typeof b)return!1;var c=Object.getPrototypeOf(b);return!c||c===Object.prototype}(a)||Array.isArray(a)||!!a[Ua]||!!a.constructor[Ua]||qa(a)||ra(a))}function qc(a){return L(a)||w(23,a),a[t].t}function R(a,b,c){void 0===c&&(c=!1),0===V(a)?(c?Object.keys:Z)(a).forEach(function(d){c&&"symbol"==typeof d||b(d,a[d],a)}):a.forEach(function(d,j){return b(j,d,a)})}function V(a){var b=a[t];return b?b.i>3?b.i-4:b.i:Array.isArray(a)?1:qa(a)?2:ra(a)?3:0}function W(a,b){return 2===V(a)?a.has(b):Object.prototype.hasOwnProperty.call(a,b)}function pa(a,b){return 2===V(a)?a.get(b):a[b]}function rb(a,b,c){var d=V(a);2===d?a.set(b,c):3===d?(a.delete(b),a.add(c)):a[b]=c}function sb(a,b){return a===b?0!==a||1/a==1/b:a!=a&&b!=b}function qa(a){return wc&&a instanceof Map}function ra(a){return xc&&a instanceof Set}function x(a){return a.o||a.t}function Ja(a){if(Array.isArray(a))return Array.prototype.slice.call(a);var b=Db(a);delete b[t];for(var c=Z(b),d=0;d<c.length;d++){var j=c[d],i=b[j];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(b[j]={configurable:!0,writable:!0,enumerable:i.enumerable,value:a[j]})}return Object.create(Object.getPrototypeOf(a),b)}function Ka(a,b){La(a)||L(a)||!K(a)||(V(a)>1&&(a.set=a.add=a.clear=a.delete=rc),Object.freeze(a),b&&R(a,function(c,d){return Ka(d,!0)},!0))}function rc(){w(2)}function La(a){return null==a||"object"!=typeof a||Object.isFrozen(a)}function S(a){var b=Eb[a];return b||w("production"!==process.env.NODE_ENV?18:19,a),b}function Ma(a,b){Eb[a]=b}function ea(){return"production"===process.env.NODE_ENV||Y||w(0),Y}function Na(a,b){b&&(S("Patches"),a.u=[],a.s=[],a.v=b)}function sa(a){Oa(a),a.p.forEach(sc),a.p=null}function Oa(a){a===Y&&(Y=a.l)}function tb(a){return Y={p:[],l:Y,h:a,m:!0,_:0}}function sc(a){var b=a[t];0===b.i||1===b.i?b.j():b.g=!0}function Pa(a,b){b._=b.p.length;var c=b.p[0],d=void 0!==a&&a!==c;return b.h.O||S("ES5").S(b,a,d),d?(c[t].P&&(sa(b),w(4)),K(a)&&(a=ta(b,a),b.l||ua(b,a)),b.u&&S("Patches").M(c[t],a,b.u,b.s)):a=ta(b,c,[]),sa(b),b.u&&b.v(b.u,b.s),a!==Ta?a:void 0}function ta(a,b,c){if(La(b))return b;var d=b[t];if(!d)return R(b,function(i,f){return ub(a,d,b,i,f,c)},!0),b;if(d.A!==a)return b;if(!d.P)return ua(a,d.t,!0),d.t;if(!d.I){d.I=!0,d.A._--;var j=4===d.i||5===d.i?d.o=Ja(d.k):d.o;R(3===d.i?new Set(j):j,function(i,f){return ub(a,d,j,i,f,c)}),ua(a,j,!1),c&&a.u&&S("Patches").R(d,c,a.u,a.s)}return d.o}function ub(a,b,c,d,j,i){if("production"!==process.env.NODE_ENV&&j===c&&w(5),L(j)){var f=ta(a,j,i&&b&&3!==b.i&&!W(b.D,d)?i.concat(d):void 0);if(rb(c,d,f),!L(f))return;a.m=!1}if(K(j)&&!La(j)){if(!a.h.N&&a._<1)return;ta(a,j),b&&b.A.l||ua(a,j)}}function ua(a,b,c){void 0===c&&(c=!1),a.h.N&&a.m&&Ka(b,c)}function Qa(a,b){var c=a[t];return(c?x(c):a)[b]}function vb(a,b){if(b in a)for(var c=Object.getPrototypeOf(a);c;){var d=Object.getOwnPropertyDescriptor(c,b);if(d)return d;c=Object.getPrototypeOf(c)}}function G(a){a.P||(a.P=!0,a.l&&G(a.l))}function Ra(a){a.o||(a.o=Ja(a.t))}function fa(a,b,c){var d=qa(b)?S("MapSet").T(b,c):ra(b)?S("MapSet").F(b,c):a.O?function(j,i){var f=Array.isArray(j),g={i:f?1:0,A:i?i.A:ea(),P:!1,I:!1,D:{},l:i,t:j,k:null,o:null,j:null,C:!1},e=g,h=_;f&&(e=[g],h=wa);var k=Proxy.revocable(e,h),l=k.revoke,o=k.proxy;return g.k=o,g.j=l,o}(b,c):S("ES5").J(b,c);return(c?c.A:ea()).p.push(d),d}function wb(a){return L(a)||w(22,a),function b(c){if(!K(c))return c;var d,j=c[t],i=V(c);if(j){if(!j.P&&(j.i<4||!S("ES5").K(j)))return j.t;j.I=!0,d=xb(c,i),j.I=!1}else d=xb(c,i);return R(d,function(f,g){j&&pa(j.t,f)===g||rb(d,f,b(g))}),3===i?new Set(d):d}(a)}function xb(a,b){switch(b){case 2:return new Map(a);case 3:return Array.from(a)}return Ja(a)}function yb(){function a(f,g){var e=i[f];return e?e.enumerable=g:i[f]=e={configurable:!0,enumerable:g,get:function(){var h=this[t];return"production"!==process.env.NODE_ENV&&j(h),_.get(h,f)},set:function(h){var k=this[t];"production"!==process.env.NODE_ENV&&j(k),_.set(k,f,h)}},e}function b(f){for(var g=f.length-1;g>=0;g--){var e=f[g][t];if(!e.P)switch(e.i){case 5:d(e)&&G(e);break;case 4:c(e)&&G(e)}}}function c(f){for(var g=f.t,e=f.k,h=Z(e),k=h.length-1;k>=0;k--){var l=h[k];if(l!==t){var o=g[l];if(void 0===o&&!W(g,l))return!0;var m=e[l],n=m&&m[t];if(n?n.t!==o:!sb(m,o))return!0}}var p=!!g[t];return h.length!==Z(g).length+(p?0:1)}function d(f){var g=f.k;if(g.length!==f.t.length)return!0;var e=Object.getOwnPropertyDescriptor(g,g.length-1);return!(!e||e.get)}function j(f){f.g&&w(3,JSON.stringify(x(f)))}var i={};Ma("ES5",{J:function(f,g){var e=Array.isArray(f),h=function(l,o){if(l){for(var m=Array(o.length),n=0;n<o.length;n++)Object.defineProperty(m,""+n,a(n,!0));return m}var p=Db(o);delete p[t];for(var q=Z(p),r=0;r<q.length;r++){var s=q[r];p[s]=a(s,l||!!p[s].enumerable)}return Object.create(Object.getPrototypeOf(o),p)}(e,f),k={i:e?5:4,A:g?g.A:ea(),P:!1,I:!1,D:{},l:g,t:f,k:h,o:null,g:!1,C:!1};return Object.defineProperty(h,t,{value:k,writable:!0}),h},S:function(f,g,e){e?L(g)&&g[t].A===f&&b(f.p):(f.u&&function h(k){if(k&&"object"==typeof k){var l=k[t];if(l){var o=l.t,m=l.k,n=l.D,p=l.i;if(4===p)R(m,function(u){u!==t&&(void 0!==o[u]||W(o,u)?n[u]||h(m[u]):(n[u]=!0,G(l)))}),R(o,function(u){void 0!==m[u]||W(m,u)||(n[u]=!1,G(l))});else if(5===p){if(d(l)&&(G(l),n.length=!0),m.length<o.length)for(var q=m.length;q<o.length;q++)n[q]=!1;else for(var r=o.length;r<m.length;r++)n[r]=!0;for(var s=Math.min(m.length,o.length),v=0;v<s;v++)void 0===n[v]&&h(m[v])}}}}(f.p[0]),b(f.p))},K:function(f){return 4===f.i?c(f):d(f)}})}function zb(){function a(d){if(!K(d))return d;if(Array.isArray(d))return d.map(a);if(qa(d))return new Map(Array.from(d.entries()).map(function(f){return[f[0],a(f[1])]}));if(ra(d))return new Set(Array.from(d).map(a));var j=Object.create(Object.getPrototypeOf(d));for(var i in d)j[i]=a(d[i]);return j}function b(d){return L(d)?a(d):d}var c="add";Ma("Patches",{$:function(d,j){return j.forEach(function(i){for(var f=i.path,g=i.op,e=d,h=0;h<f.length-1;h++)"object"!=typeof(e=pa(e,f[h]))&&w(15,f.join("/"));var k=V(e),l=a(i.value),o=f[f.length-1];switch(g){case"replace":switch(k){case 2:return e.set(o,l);case 3:w(16);default:return e[o]=l}case c:switch(k){case 1:return e.splice(o,0,l);case 2:return e.set(o,l);case 3:return e.add(l);default:return e[o]=l}case"remove":switch(k){case 1:return e.splice(o,1);case 2:return e.delete(o);case 3:return e.delete(i.value);default:return delete e[o]}default:w(17,g)}}),d},R:function(d,j,i,f){switch(d.i){case 0:case 4:case 2:return function(g,e,h,k){var l=g.t,o=g.o;R(g.D,function(m,n){var p=pa(l,m),q=pa(o,m),r=n?W(l,m)?"replace":c:"remove";if(p!==q||"replace"!==r){var s=e.concat(m);h.push("remove"===r?{op:r,path:s}:{op:r,path:s,value:q}),k.push(r===c?{op:"remove",path:s}:"remove"===r?{op:c,path:s,value:b(p)}:{op:"replace",path:s,value:b(p)})}})}(d,j,i,f);case 5:case 1:return function(g,e,h,k){var l=g.t,o=g.D,m=g.o;if(m.length<l.length){var n=[m,l];l=n[0],m=n[1];var p=[k,h];h=p[0],k=p[1]}for(var q=0;q<l.length;q++)if(o[q]&&m[q]!==l[q]){var r=e.concat([q]);h.push({op:"replace",path:r,value:b(m[q])}),k.push({op:"replace",path:r,value:b(l[q])})}for(var s=l.length;s<m.length;s++){var v=e.concat([s]);h.push({op:c,path:v,value:b(m[s])})}l.length<m.length&&k.push({op:"replace",path:e.concat(["length"]),value:l.length})}(d,j,i,f);case 3:return function(g,e,h,k){var l=g.t,o=g.o,m=0;l.forEach(function(n){if(!o.has(n)){var p=e.concat([m]);h.push({op:"remove",path:p,value:n}),k.unshift({op:c,path:p,value:n})}m++}),m=0,o.forEach(function(n){if(!l.has(n)){var p=e.concat([m]);h.push({op:c,path:p,value:n}),k.unshift({op:"remove",path:p,value:n})}m++})}(d,j,i,f)}},M:function(d,j,i,f){i.push({op:"replace",path:[],value:j}),f.push({op:"replace",path:[],value:d.t})}})}function Ab(){function a(g,e){function h(){this.constructor=g}j(g,e),g.prototype=(h.prototype=e.prototype,new h())}function b(g){g.o||(g.D=new Map(),g.o=new Map(g.t))}function c(g){g.o||(g.o=new Set(),g.t.forEach(function(e){if(K(e)){var h=fa(g.A.h,e,g);g.p.set(e,h),g.o.add(h)}else g.o.add(e)}))}function d(g){g.g&&w(3,JSON.stringify(x(g)))}var j=function(g,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,k){h.__proto__=k}||function(h,k){for(var l in k)k.hasOwnProperty(l)&&(h[l]=k[l])})(g,e)},i=function(){function g(h,k){return this[t]={i:2,l:k,A:k?k.A:ea(),P:!1,I:!1,o:void 0,D:void 0,t:h,k:this,C:!1,g:!1},this}a(g,Map);var e=g.prototype;return Object.defineProperty(e,"size",{get:function(){return x(this[t]).size}}),e.has=function(h){return x(this[t]).has(h)},e.set=function(h,k){var l=this[t];return d(l),x(l).has(h)&&x(l).get(h)===k||(b(l),G(l),l.D.set(h,!0),l.o.set(h,k),l.D.set(h,!0)),this},e.delete=function(h){if(!this.has(h))return!1;var k=this[t];return d(k),b(k),G(k),k.D.set(h,!1),k.o.delete(h),!0},e.clear=function(){var h=this[t];d(h),x(h).size&&(b(h),G(h),h.D=new Map(),R(h.t,function(k){h.D.set(k,!1)}),h.o.clear())},e.forEach=function(h,k){var l=this;x(this[t]).forEach(function(o,m){h.call(k,l.get(m),m,l)})},e.get=function(h){var k=this[t];d(k);var l=x(k).get(h);if(k.I||!K(l))return l;if(l!==k.t.get(h))return l;var o=fa(k.A.h,l,k);return b(k),k.o.set(h,o),o},e.keys=function(){return x(this[t]).keys()},e.values=function(){var h,k=this,l=this.keys();return(h={})[va]=function(){return k.values()},h.next=function(){var o=l.next();return o.done?o:{done:!1,value:k.get(o.value)}},h},e.entries=function(){var h,k=this,l=this.keys();return(h={})[va]=function(){return k.entries()},h.next=function(){var o=l.next();if(o.done)return o;var m=k.get(o.value);return{done:!1,value:[o.value,m]}},h},e[va]=function(){return this.entries()},g}(),f=function(){function g(h,k){return this[t]={i:3,l:k,A:k?k.A:ea(),P:!1,I:!1,o:void 0,t:h,k:this,p:new Map(),g:!1,C:!1},this}a(g,Set);var e=g.prototype;return Object.defineProperty(e,"size",{get:function(){return x(this[t]).size}}),e.has=function(h){var k=this[t];return d(k),k.o?!!k.o.has(h)||!(!k.p.has(h)||!k.o.has(k.p.get(h))):k.t.has(h)},e.add=function(h){var k=this[t];return d(k),this.has(h)||(c(k),G(k),k.o.add(h)),this},e.delete=function(h){if(!this.has(h))return!1;var k=this[t];return d(k),c(k),G(k),k.o.delete(h)||!!k.p.has(h)&&k.o.delete(k.p.get(h))},e.clear=function(){var h=this[t];d(h),x(h).size&&(c(h),G(h),h.o.clear())},e.values=function(){var h=this[t];return d(h),c(h),h.o.values()},e.entries=function(){var h=this[t];return d(h),c(h),h.o.entries()},e.keys=function(){return this.values()},e[va]=function(){return this.values()},e.forEach=function(h,k){for(var l=this.values(),o=l.next();!o.done;)h.call(k,o.value,o.value,this),o=l.next()},g}();Ma("MapSet",{T:function(g,e){return new i(g,e)},F:function(g,e){return new f(g,e)}})}function tc(){yb(),Ab(),zb()}function uc(a){return a}function vc(a){return a}var Bb,Y,Sa="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),wc="undefined"!=typeof Map,xc="undefined"!=typeof Set,Cb="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ta=Sa?Symbol.for("immer-nothing"):((Bb={})["immer-nothing"]=!0,Bb),Ua=Sa?Symbol.for("immer-draftable"):"__$immer_draftable",t=Sa?Symbol.for("immer-state"):"__$immer_state",va="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",yc={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(a){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+a},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(a){return"Cannot apply patch, path doesn't resolve: "+a},16:'Sets cannot have "replace" patches.',17:function(a){return"Unsupported patch operation: "+a},18:function(a){return"The plugin for '"+a+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+a+"()` when initializing your application."},19:"plugin not loaded",20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(a){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+a+"'"},22:function(a){return"'current' expects a draft, got: "+a},23:function(a){return"'original' expects a draft, got: "+a}},Z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,Db=Object.getOwnPropertyDescriptors||function(a){var b={};return Z(a).forEach(function(c){b[c]=Object.getOwnPropertyDescriptor(a,c)}),b},Eb={},_={get:function(a,b){if(b===t)return a;var c=x(a);if(!W(c,b))return function(j,i,f){var g,e=vb(i,f);return e?"value"in e?e.value:null===(g=e.get)||void 0===g?void 0:g.call(j.k):void 0}(a,c,b);var d=c[b];return a.I||!K(d)?d:d===Qa(a.t,b)?(Ra(a),a.o[b]=fa(a.A.h,d,a)):d},has:function(a,b){return b in x(a)},ownKeys:function(a){return Reflect.ownKeys(x(a))},set:function(a,b,c){var d=vb(x(a),b);if(null==d?void 0:d.set)return d.set.call(a.k,c),!0;if(!a.P){var j=Qa(x(a),b),i=null==j?void 0:j[t];if(i&&i.t===c)return a.o[b]=c,a.D[b]=!1,!0;if(sb(c,j)&&(void 0!==c||W(a.t,b)))return!0;Ra(a),G(a)}return a.o[b]=c,a.D[b]=!0,!0},deleteProperty:function(a,b){return void 0!==Qa(a.t,b)||b in a.t?(a.D[b]=!1,Ra(a),G(a)):delete a.D[b],a.o&&delete a.o[b],!0},getOwnPropertyDescriptor:function(a,b){var c=x(a),d=Reflect.getOwnPropertyDescriptor(c,b);return d?{writable:!0,configurable:1!==a.i||"length"!==b,enumerable:d.enumerable,value:c[b]}:d},defineProperty:function(){w(11)},getPrototypeOf:function(a){return Object.getPrototypeOf(a.t)},setPrototypeOf:function(){w(12)}},wa={};R(_,function(a,b){wa[a]=function(){return arguments[0]=arguments[0][0],b.apply(this,arguments)}}),wa.deleteProperty=function(a,b){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(b))&&w(13),_.deleteProperty.call(this,a[0],b)},wa.set=function(a,b,c){return"production"!==process.env.NODE_ENV&&"length"!==b&&isNaN(parseInt(b))&&w(14),_.set.call(this,a[0],b,c,a[0])};var Fb=function(){function a(c){this.O=Cb,this.N="production"!==process.env.NODE_ENV,"boolean"==typeof(null==c?void 0:c.useProxies)&&this.setUseProxies(c.useProxies),"boolean"==typeof(null==c?void 0:c.autoFreeze)&&this.setAutoFreeze(c.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var b=a.prototype;return b.produce=function(c,d,j){if("function"==typeof c&&"function"!=typeof d){var i=d;d=c;var f=this;return function(l){var o=this;void 0===l&&(l=i);for(var m=arguments.length,n=Array(m>1?m-1:0),p=1;p<m;p++)n[p-1]=arguments[p];return f.produce(l,function(q){var r;return(r=d).call.apply(r,[o,q].concat(n))})}}var g;if("function"!=typeof d&&w(6),void 0!==j&&"function"!=typeof j&&w(7),K(c)){var e=tb(this),h=fa(this,c,void 0),k=!0;try{g=d(h),k=!1}finally{k?sa(e):Oa(e)}return"undefined"!=typeof Promise&&g instanceof Promise?g.then(function(l){return Na(e,j),Pa(l,e)},function(l){throw sa(e),l}):(Na(e,j),Pa(g,e))}if(!c||"object"!=typeof c)return(g=d(c))===Ta?void 0:(void 0===g&&(g=c),this.N&&Ka(g,!0),g);w(21,c)},b.produceWithPatches=function(c,d){var j,i,f=this;return"function"==typeof c?function(g){for(var e=arguments.length,h=Array(e>1?e-1:0),k=1;k<e;k++)h[k-1]=arguments[k];return f.produceWithPatches(g,function(l){return c.apply(void 0,[l].concat(h))})}:[this.produce(c,d,function(g,e){j=g,i=e}),j,i]},b.createDraft=function(c){K(c)||w(8),L(c)&&(c=wb(c));var d=tb(this),j=fa(this,c,void 0);return j[t].C=!0,Oa(d),j},b.finishDraft=function(c,d){var j=c&&c[t];"production"!==process.env.NODE_ENV&&(j&&j.C||w(9),j.I&&w(10));var i=j.A;return Na(i,d),Pa(void 0,i)},b.setAutoFreeze=function(c){this.N=c},b.setUseProxies=function(c){c&&!Cb&&w(20),this.O=c},b.applyPatches=function(c,d){var j;for(j=d.length-1;j>=0;j--){var i=d[j];if(0===i.path.length&&"replace"===i.op){c=i.value;break}}var f=S("Patches").$;return L(c)?f(c,d):this.produce(c,function(g){return f(g,d.slice(j+1))})},a}(),J=new Fb(),xa=J.produce,zc=J.produceWithPatches.bind(J),Ac=J.setAutoFreeze.bind(J),Bc=J.setUseProxies.bind(J),Cc=J.applyPatches.bind(J),Dc=J.createDraft.bind(J),Ec=J.finishDraft.bind(J);const _d=xa;var Da={};try{Da.WeakMap=WeakMap}catch(a){Da.WeakMap=function(b,c){"use strict";var d=c.defineProperty,j=c.hasOwnProperty,i=f.prototype;return i.delete=function(e){return this.has(e)&&delete e[this._]},i.get=function(e){return this.has(e)?e[this._]:void 0},i.has=function(e){return j.call(e,this._)},i.set=function(e,h){return d(e,this._,{configurable:!0,value:h}),this},f;function f(e){d(this,"_",{value:"_@ungap/weakmap"+b++}),e&&e.forEach(g,this)}function g(e){this.set(e[0],e[1])}}(Math.random(),Object)}const Ea=Da.WeakMap;var Q="-"+Math.random().toFixed(6)+"%",na=!1;try{(function(a,b,c){return b in a&&(a.innerHTML="<p "+c+'="'+Q+'"></p>',a[b].childNodes[0].getAttribute(c)==Q)})(document.createElement("template"),"content","tabindex")||(Q="_dt: "+Q.slice(1,-1)+";",na=!0)}catch(a){}var da="<!--"+Q+"-->",eb=8,$b=11,fb=1,gb=3,Fa=/^(?:style|textarea)$/i,hb=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;function ib(a){return a.join(da).replace(bc,fc).replace(ac,dc)}var oa=" \\f\\n\\r\\t",jb="[^"+oa+`\\/>"'=]+`,Ga="["+oa+"]+"+jb,kb="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",lb=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+jb.replace("\\/","")+"))?)",ac=new RegExp(kb+Ga+lb+"+)(["+oa+"]*/?>)","g"),bc=new RegExp(kb+Ga+lb+"*)(["+oa+"]*/>)","g"),cc=new RegExp("("+Ga+`\\s*=\\s*)(['"]?)`+da+"\\2","gi");function dc(a,b,c,d){return"<"+b+c.replace(cc,ec)+d}function ec(a,b,c){return b+(c||'"')+Q+(c||'"')}function fc(a,b,c){return hb.test(b)?a:"<"+b+c+"></"+b+">"}const{isArray:ga}=Array,{indexOf:Tc,slice:ca}=[];const Ha=a=>({get:b=>a.get(b),set:(b,c)=>(a.set(b,c),c)});const Uc=1,Pb=111,Vc=({firstChild:a,lastChild:b})=>{const c=document.createRange();return c.setStartAfter(a),c.setEndAfter(b),c.deleteContents(),a};const ba=(a,b)=>a.nodeType===Pb?1/b<0?b?Vc(a):a.lastChild:b?a.valueOf():a.firstChild:a,Fc=a=>{const{childNodes:b}=a,{length:c}=b;if(c<2)return c?b[0]:a;const d=ca.call(b,0),j=d[0],i=d[c-1];return{ELEMENT_NODE:Uc,nodeType:Pb,firstChild:j,lastChild:i,valueOf(){if(b.length!==c){let f=0;for(;f<c;)a.appendChild(d[f++])}return a}}};var Xb=function(a){"use strict";var b="fragment",c="template",d="content"in f(c),j=d?function(e){var h=f(c);return h.innerHTML=e,h.content}:function(e){var h=f(b),k=f(c),l=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(e)){var o=RegExp.$1;k.innerHTML="<table>"+e+"</table>",l=k.querySelectorAll(o)}else k.innerHTML=e,l=k.childNodes;return i(h,l),h};return function e(h,k){return(k==="svg"?g:j)(h)};function i(e,h){for(var k=h.length;k--;)e.appendChild(h[0])}function f(e){return e===b?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",e)}function g(e){var h=f(b),k=f("div");return k.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e+"</svg>",i(h,k.firstChild.childNodes),h}}(document);const cb=Xb;const aa=(a,b,c,d,j)=>{const i=c.length;let f=b.length,g=i,e=0,h=0,k=null;for(;e<f||h<g;)if(f===e){const l=g<i?h?d(c[h-1],-0).nextSibling:d(c[g-h],0):j;for(;h<g;)a.insertBefore(d(c[h++],1),l)}else if(g===h)for(;e<f;)(!k||!k.has(b[e]))&&a.removeChild(d(b[e],-1)),e++;else if(b[e]===c[h])e++,h++;else if(b[f-1]===c[g-1])f--,g--;else if(b[e]===c[g-1]&&c[h]===b[f-1]){const l=d(b[--f],-1).nextSibling;a.insertBefore(d(c[h++],1),d(b[e++],-1).nextSibling),a.insertBefore(d(c[--g],1),l),b[f]=c[g]}else{if(!k){k=new Map();let l=h;for(;l<g;)k.set(c[l],l++)}if(k.has(b[e])){const l=k.get(b[e]);if(h<l&&l<g){let o=e,m=1;for(;++o<f&&o<g&&k.get(b[o])===l+m;)m++;if(m>l-h){const n=d(b[e],0);for(;h<l;)a.insertBefore(d(c[h++],1),n)}else a.replaceChild(d(c[h++],1),d(b[e++],-1))}else e++}else a.removeChild(d(b[e++],-1))}return c};var Yb=function(a,b,c,d,j){var i=j in a,f=a.createDocumentFragment();f[b](a[d]("g")),f[b](a[d](""));var g=i?a[j](f,!0):f[c](!0);return g.childNodes.length<2?function e(h,k){for(var l=h[c](),o=h.childNodes||[],m=o.length,n=0;k&&n<m;n++)l[b](e(o[n],k));return l}:i?a[j]:function(e,h){return e[c](!!h)}}(document,"appendChild","cloneNode","createTextNode","importNode");const Zb=Yb;var _b="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")};const db=_b;var lc=na?function(a,b){var c=b.join(" ");return b.slice.call(a,0).sort(function(d,j){return c.indexOf(d.name)<=c.indexOf(j.name)?-1:1})}:function(a,b){return b.slice.call(a,0)};function mb(a,b){for(var c=b.length,d=0;d<c;)a=a.childNodes[b[d++]];return a}function Ia(a,b,c,d){for(var j=a.childNodes,i=j.length,f=0;f<i;){var g=j[f];switch(g.nodeType){case fb:var e=d.concat(f);mc(g,b,c,e),Ia(g,b,c,e);break;case eb:var h=g.textContent;if(h===Q)c.shift(),b.push(Fa.test(a.nodeName)?qb(a,d):nc(g,d.concat(f)));else switch(h.slice(0,2)){case"/*":if(h.slice(-2)!=="*/")break;case"ðŸ‘»":a.removeChild(g),f--,i--}break;case gb:Fa.test(a.nodeName)&&db.call(g.textContent)===da&&(c.shift(),b.push(qb(a,d)));break}f++}}function mc(a,b,c,d){for(var j=a.attributes,i=[],f=[],g=lc(j,c),e=g.length,h=0;h<e;){var k=g[h++],l=k.value===Q,o;if(l||1<(o=k.value.split(da)).length){var m=k.name;if(i.indexOf(m)<0){i.push(m);var n=c.shift().replace(l?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+m+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),p=j[n]||j[n.toLowerCase()];if(l)b.push(pb(p,d,n,null));else{for(var q=o.length-2;q--;)c.shift();b.push(pb(p,d,n,o))}}f.push(k)}}e=f.length,h=0;for(var r=0<e&&na&&!("ownerSVGElement"in a);h<e;){var s=f[h++];r&&(s.value=""),a.removeAttribute(s.name)}var v=a.nodeName;if(/^script$/i.test(v)){var u=document.createElement(v);for(e=j.length,h=0;h<e;)u.setAttributeNode(j[h++].cloneNode(!0));u.textContent=a.textContent,a.parentNode.replaceChild(u,a)}}function nc(a,b){return{type:"any",node:a,path:b}}function pb(a,b,c,d){return{type:"attr",node:a,path:b,name:c,sparse:d}}function qb(a,b){return{type:"text",node:a,path:b}}const gc=kc;var nb=Ha(new Ea());function hc(a,b){var c=(a.convert||ib)(b),d=a.transform;d&&(c=d(c));var j=cb(c,a.type);ob(j);var i=[];return Ia(j,i,b.slice(0),[]),{content:j,updates:function(f){for(var g=[],e=i.length,h=0,k=0;h<e;){var l=i[h++],o=mb(f,l.path);switch(l.type){case"any":g.push({fn:a.any(o,[]),sparse:!1});break;case"attr":var m=l.sparse,n=a.attribute(o,l.name,l.node);m===null?g.push({fn:n,sparse:!1}):(k+=m.length-2,g.push({fn:n,sparse:!0,values:m}));break;case"text":g.push({fn:a.text(o),sparse:!1}),o.textContent="";break}}return e+=k,function(){var p=arguments.length;if(e!==p-1)throw new Error(p-1+" values instead of "+e+`
`+b.join("${value}"));for(var q=1,r=1;q<p;){var s=g[q-r];if(s.sparse){var v=s.values,u=v[0],A=1,y=v.length;for(r+=y-2;A<y;)u+=arguments[q++]+v[A++];s.fn(u)}else s.fn(arguments[q++])}return f}}}}function ic(a,b){var c=nb.get(b)||nb.set(b,hc(a,b));return c.updates(Zb.call(document,c.content,!0))}var jc=[];function kc(a){var b=jc,c=ob;return function(d){return b!==d&&(c=ic(a,b=d)),c.apply(null,arguments)}}function ob(a){for(var b=a.childNodes,c=b.length;c--;){var d=b[c];d.nodeType!==1&&db.call(d.textContent).length===0&&a.removeChild(d)}}var oc=function(){"use strict";var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,b=/([^A-Z])([A-Z]+)/g;return function f(g,e){return"ownerSVGElement"in g?d(g,e):i(g.style,!1)};function c(f,g,e){return g+"-"+e.toLowerCase()}function d(f,g){var e;return g?e=g.cloneNode(!0):(f.setAttribute("style","--hyper:style;"),e=f.getAttributeNode("style")),e.value="",f.setAttributeNode(e),i(e,!0)}function j(f){var g,e=[];for(g in f)e.push(g.replace(b,c),":",f[g],";");return e.join("")}function i(f,g){var e,h;return function(k){var l,o,m,n;switch(typeof k){case"object":if(k){if(e==="object"){if(!g){if(h!==k)for(o in h)o in k||(f[o]="")}}else g?f.value="":f.cssText="";l=g?{}:f;for(o in k)n=k[o],m=typeof n==="number"&&!a.test(o)?n+"px":n,!g&&/^--/.test(o)?l.setProperty(o,m):l[o]=m;e="object",g?f.value=j(h=l):h=k;break}default:h!=k&&(e="string",h=k,g?f.value=k||"":f.cssText=k||"");break}}}}();const pc=oc;const Lc=a=>b=>{for(const c in b){const d=c==="role"?c:`aria-${c}`,j=b[c];j==null?a.removeAttribute(d):a.setAttribute(d,j)}},Nb=(a,b)=>{let c,d=!0;const j=document.createAttributeNS(null,b);return i=>{c!==i&&(c=i,c==null?d||(a.removeAttributeNode(j),d=!0):(j.value=i,d&&(a.setAttributeNodeNS(j),d=!1)))}},Mc=({dataset:a})=>b=>{for(const c in b){const d=b[c];d==null?delete a[c]:a[c]=d}},Nc=(a,b)=>{let c,d=b.slice(2);return!(b in a)&&b.toLowerCase()in a&&(d=d.toLowerCase()),j=>{const i=ga(j)?j:[j,!1];c!==i[0]&&(c&&a.removeEventListener(d,c,i[1]),(c=i[0])&&a.addEventListener(d,c,i[1]))}},Oc=a=>b=>{typeof b==="function"?b(a):b.current=a},Ob=(a,b)=>c=>{a[b]=c},De=a=>{let b;return c=>{b!=c&&(b=c,a.textContent=c==null?"":c)}};const Pc=(a,b)=>{let c;return d=>{c!==d&&(c=d,a[b]!==d&&(d==null?(a[b]="",a.removeAttribute(b)):a[b]=d))}},Qc=/^(?:form|list)$/i,Rc=(a,b)=>a.ownerDocument.createTextNode(b);function ya(a){return this.type=a,gc(this)}ya.prototype={attribute(a,b,c){const d=this.type==="svg";switch(b){case"class":if(d)return Nb(a,b,d);b="className";case"props":return Ob(a,b);case"aria":return Lc(a);case"style":return pc(a,c,d);case"ref":return Oc(a);case".dataset":return Mc(a);default:return b.slice(0,1)==="."?Ob(a,b.slice(1)):b.slice(0,2)==="on"?Nc(a,b):b in a&&!(d||Qc.test(b))?Pc(a,b):Nb(a,b,d)}},any(a,b){const{type:c}=this;let d=!1,j;const i=f=>{switch(typeof f){case"string":case"number":case"boolean":d?j!==f&&(j=f,b[0].textContent=f):(d=!0,j=f,b=aa(a.parentNode,b,[Rc(a,f)],ba,a));break;case"function":i(f(a));break;case"object":case"undefined":if(f==null){d=!1,b=aa(a.parentNode,b,[],ba,a);break}default:d=!1,j=f;if(ga(f))if(f.length===0)b.length&&(b=aa(a.parentNode,b,[],ba,a));else switch(typeof f[0]){case"string":case"number":case"boolean":i(String(f));break;case"function":i(f.map(Sc,a));break;case"object":ga(f[0])&&(f=f.concat.apply([],f));default:b=aa(a.parentNode,b,f,ba,a);break}else"ELEMENT_NODE"in f?b=aa(a.parentNode,b,f.nodeType===11?ca.call(f.childNodes):[f],ba,a):"text"in f?i(String(f.text)):"any"in f?i(f.any):"html"in f?b=aa(a.parentNode,b,ca.call(cb([].concat(f.html).join(""),c).childNodes),ba,a):"length"in f&&i(ca.call(f));break}};return i},text(a){let b;const c=d=>{if(b!==d){b=d;const j=typeof d;j==="object"&&d?"text"in d?c(String(d.text)):"any"in d?c(d.any):"html"in d?c([].concat(d.html).join("")):"length"in d&&c(ca.call(d).join("")):j==="function"?c(d(a)):a.textContent=d==null?"":d}};return c}};function Sc(a){return a(this)}const{create:Gb,freeze:Gc,keys:Hc}=Object,Ic=ya.prototype,Hb=Ha(new Ea()),Ib=a=>({html:Jb("html",a),svg:Jb("svg",a),render(b,c){const d=typeof c==="function"?c():c,j=Hb.get(b)||Hb.set(b,ha()),i=d instanceof Aa?za(a,j,d):d;return i!==j.wire&&(j.wire=i,b.textContent="",b.appendChild(i.valueOf())),b}}),ha=()=>({stack:[],entry:null,wire:null}),Jb=(a,b)=>{const c=Ha(new Ea()),d=i=>function(){return za(b,i,j.apply(null,arguments))};return j.for=(i,f)=>{const g=c.get(i)||c.set(i,Gb(null));return g[f]||(g[f]=d(ha()))},j.node=function(){return za(b,ha(),j.apply(null,arguments)).valueOf()},j;function j(){return new Aa(a,Kc.apply(null,arguments))}},za=(a,b,{type:c,template:d,values:j})=>{const{length:i}=j;Kb(a,b,j,i);let{entry:f}=b;if(!f||(f.template!==d||f.type!==c)){const g=new a(c);b.entry=f={type:c,template:d,tag:g,wire:Fc(g(d,...j))}}else f.tag(d,...j);return f.wire},Kb=(a,{stack:b},c,d)=>{for(let j=0;j<d;j++){const i=c[j];i instanceof Jc?c[j]=za(a,b[j]||(b[j]=ha()),i):ga(i)?Kb(a,b[j]||(b[j]=ha()),i,i.length):b[j]=null}d<b.length&&b.splice(d)};Gc(Aa);function Aa(a,b){this.type=a,this.template=b.shift(),this.values=b}const Jc=Aa,ie=a=>{const b=Gb(Ic);return Hc(a).forEach(d=>{b[d]=a[d](b[d]||(d==="convert"?ib:String))}),c.prototype=b,Ib(c);function c(){return ya.apply(this,arguments)}};const{render:Lb,html:$,svg:Mb}=Ib(ya);function Kc(){let a=[],b=0,{length:c}=arguments;for(;b<c;)a.push(arguments[b++]);return a}const ed=function a(b){const{worldData:c,character:d}=b,{map:j}=d,i={plains:[189,131,0],mountains:[125,125,125],forests:[4,109,4],water:[0,53,158]};function f(g){if(!g)return;const e=i[g.biome],h=[];for(let k=0;k<e.length;k++){const l=e[k]+g.elevation*3,o=l>255?255:l;h.push(o)}return h.join(", ")}return $`
        ${c[j].map((g,e)=>$`
                <div class="row" data-i=${e}>
                    ${g.map((h,k)=>$`
                            <div class="tile" style="${"background-color:rgb("+f(h)+")"}" data-i=${k}>
                                ${hd(d,k,e)}
                            </div>
                        `)}
                </div>
            `)}

`};function hd(a,b,c){return a.posX===b&&a.posY===c?Mb`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="meeple" style="height:20px; width:20px;vertical-align:top;position:relative;z-index:10"><path d="M0 0h512v512H0z" fill="#000000" fill-opacity="0"></path><g class="" transform="translate(0,0)" style=""><path d="M192.215 39.565c-48.32 6.48-43.031 58.948-42.874 75.82l93.895 13.622c1.004-35.647 5.621-59.868 13.545-76.27 2.186-4.523 4.704-8.455 7.469-11.836zm107.012 2.48c-1.17.023-2.36.098-3.57.226-8.898.937-15.873 4.232-22.669 18.296-6.795 14.065-11.916 39.331-12.095 80.59l-.026 5.95-5.484 2.306c-50.104 21.083-82.1 39.796-100.16 55.334-18.06 15.538-21.362 26.305-19.541 34.088 1.82 7.783 10.734 16.375 25.353 23.44 14.62 7.064 33.96 12.409 52.951 15.634l11.293 1.918-83.045 192.608 120.118-32.106 51.136-112.484 51.045 86.37 113.43-30.929-86.887-142.223 10.647-3.617c15.087-5.126 32.096-12.698 45.673-21.45 13.578-8.753 23.156-18.91 25.407-26.64 1.125-3.864.992-7.055-1.028-11.146-2.02-4.09-6.362-9.116-14.296-14.488-15.869-10.744-45.623-22.39-93.485-32.809l-6.672-1.453-.398-6.816c-.762-13.052-6.589-35.803-17.293-53.27-9.366-15.284-21.176-26.136-36.961-27.242a38.595 38.595 0 0 0-3.443-.086zm-170.685 87.41c-79.404 44.697-85.83 54.663-86.757 71.6-2.209 40.397 42.597 46.791 89.698 59.957-6.026-5.765-11.447-10.033-13.329-18.075-3.82-16.327 4.783-34.158 25.328-51.834 17.067-14.684 43.279-30.404 80.907-47.62zM93.291 271.788c-22.445 48.26-38.283 103.023-59.254 153.977l87.723 43.328 17.77-35.852 57.154-132.556zm222.283 94.963l-15.752 34.648 43.543 12.375z" fill="#fff" fill-opacity="1"></path></g></svg>`:""}const fd=function a(b){return $`
    <div class="header-spacer"></div>
    <header>
        <div class="intro">Just a test to see if re-rendering 1000+ views at the same time causes major issues in rendering. Uses Perlin noise to build the map. Each map tile is a DOM node with logic.</div>
        <button onclick=${dd}>Next</button>
    </header>
`};const gd=document.querySelector("main");function Ca(a){Lb(gd,$`
            ${fd(a)}
            ${ed(a)}
        `)}const B=[];function Yc(a){B.push(a),Ca(a)}const rf=function a(b){B[B.length-1];const c=xa(B[B.length-1],b);return Ca(c),B.push(c),!0},Qb=function a(b){return new Promise((c,d)=>{try{const j=xa(B[B.length-1],b);Ca(j),B.push(j),c()}catch(j){d(j)}})};function sf(){return B[B.length-1]}function tf(){return B}const uf=function a(){return B.length<=1?void 0:(B.pop(),Ca(B[B.length-1]),!0)};const Ba={n:{x:0,y:-1},ne:{x:1,y:-1},e:{x:1,y:0},se:{x:1,y:1},s:{x:0,y:1},sw:{x:-1,y:1},w:{x:-1,y:0},nw:{x:-1,y:-1}},Rb={n:["nw","n","ne"],ne:["n","ne","e"],e:["ne","e","se"],se:["e","se","s"],s:["se","s","sw"],sw:["s","sw","w"],w:["sw","w","nw"],nw:["w","nw","n"]},X=[{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0},{x:-1,y:-1}],Sb={n:["nw","ne"],ne:["n","e"],e:["ne","se"],se:["e","s"],s:["se","sw"],sw:["s","w"],w:["sw","nw"],nw:["w","n"]};async function Ue(a){const{character:b,worldData:c}=a,{posX:d,posY:j,direction:i}=b;let f=a.character.onABoat,g=$c(i,d,j,c),e=d+Ba[g].x,h=j+Ba[g].y;const k=await ia(e,h,a.character.rng1,a.character.rng2,a.worldData);if(!f&&Math.ceil(k*100)===1&&Math.ceil(a.character.elevation*100)!==1)if(Math.random()>.8)f=!0,console.log("you find passage on a boat, fashion a raft, steal a boat, etc");else{console.log("A body of water forces you to change direction");const l=[];for(let m=1;m<X.length;m++){const n=await ia(X[m].x,X[m].y,a.character.rng1,a.character.rng2,a.worldData);Math.ceil(n*100)>1&&l.push(X[m])}const o=l[Math.floor(Math.random()*l.length)];console.log(o),e=d+o.x,h=j+o.y,g=Sb[g][Math.floor(Math.random()*Sb[g].length)]}e<0&&(e=0,g="se"),h<0&&(h=0,g="se");if(f){const l=await ia(e,h,a.character.rng1,a.character.rng2,a.worldData);console.log(Math.ceil(l*100)),Math.ceil(l*100)>1&&(f=!1,console.log("You get out of the boat"))}await Qb(l=>{l.character.elevation=Va(e,h,l.character.rng1,l.character.rng2,l.worldData),l.character.direction=g,l.character.posX=e,l.character.posY=h,l.character.onABoat=f;for(let o=0;o<X.length;o++){const m=e+X[o].x,n=h+X[o].y;if(!l.worldData[n]){l.worldData[n]=[];let p=0;for(;p<m;)l.worldData[n][p]=void 0,p++}if(!l.worldData[n][m]){if(l.worldData[n].length<m){let r=l.worldData[n].length;for(;r<m;)l.worldData[n][r]=void 0,r++}const p=Va(m,n,l.character.rng1,l.character.rng2,l.worldData),q=Wa(p);l.worldData[n][m]=q}}})}function $c(a,b,c,d){let j=Rb[a],i=a;Math.random()>.8&&(i=j[Math.floor(Math.random()*j.length)]);if(!Tb(i,b,c,d)){let f=j,g=0;for(;g<5;)if(f[g]===void 0){if(Tb(f[g],b,c,d)){i=f[g];break}}else f=Rb[a[g-1]],g=0}return i}async function Tb(a,b,c,d){const j=b+Ba[a].x,i=c+Ba[a].y;return d&&d[i]&&d[i][j]?!0:!1}function ia(a,b,c,d,j){return new Promise((i,f)=>{try{const g=Va(a,b,c,d,j);i(g)}catch(g){f(g)}})}function Va(a,b,c,d,j){function i(l,o){return c.simplex2(l,o)/2+.5}function f(l,o){return d.simplex2(l,o)/2+.5}j[b]||(j[b]=[]);let g=a/100-.5,e=b/100-.5,h=1*i(1*g,1*e)+.5*i(2*g,2*e)+.25*i(4*g,4*e)+.13*i(8*g,8*e)+.06*i(16*g,16*e)+.03*i(32*g,32*e);h/=1+.5+.25+.13+.06+.03,h=Math.pow(h,5);let k=1*f(1*g,1*e)+.75*f(2*g,2*e)+.33*f(4*g,4*e)+.33*f(8*g,8*e)+.33*f(16*g,16*e)+.5*f(32*g,32*e);return k/=1+.75+.33+.33+.33+.5,h}function Wa(a){const b=ad();return b.elevation=Math.ceil(a*100),b.elevation===1?b.biome="water":b.elevation<4?b.biome="plains":b.elevation<12?b.biome="forests":b.biome="mountains",b.area=cd(),b.structure=bd(b.area),b}function ad(){return{travelLine:void 0,dayArrived:void 0,daysVisited:void 0,biome:void 0,subBiome:void 0,elevation:void 0,people:[],animals:[],monsters:[],items:[],structure:void 0,area:void 0}}const Ub=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,9,9,9,10];function Vb(a){const b=Ub[Math.floor(Math.random()*Ub.length)],c=10/a.length,d=Math.ceil(b/c);return a[d]}function Ve(a){let b}function bd(a){let b;a==="empty"?b=["empty","empty","empty","hovel","home","farm","inn","temple","cave","fortress"]:a==="village"?b=["hovel","hovels","home","homes","farm","farm","farm","farm","inn","shrine"]:a==="town"?b=["hovel","home","homes","homes","inn","inns","business","businesses","businesses","temple"]:a==="ruins"?b=["earthworks","earthworks","earthworks","earthworks","earthworks","carved stone","crumbling stone walls","cave","catacombs","ruined temple"]:b=["homes","homes","inns","inns","inns","businesses","businesses","temples","mansions","castle"];const c=Vb(b);return c}function cd(){const a=["empty","empty","empty","empty","empty","empty","village","town","ruins","city"],b=Vb(a);return b}function We(){}const Wb=function(a){var b={};function c(m,n,p){this.x=m,this.y=n,this.z=p}c.prototype.dot2=function(m,n){return this.x*m+this.y*n},c.prototype.dot3=function(m,n,p){return this.x*m+this.y*n+this.z*p};var d=[new c(1,1,0),new c(-1,1,0),new c(1,-1,0),new c(-1,-1,0),new c(1,0,1),new c(-1,0,1),new c(1,0,-1),new c(-1,0,-1),new c(0,1,1),new c(0,-1,1),new c(0,1,-1),new c(0,-1,-1)],j=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],i=new Array(512),f=new Array(512);b.seed=function(m){m>0&&m<1&&(m*=65536),m=Math.floor(m),m<256&&(m|=m<<8);for(var n=0;n<256;n++){var p;n&1?p=j[n]^m&255:p=j[n]^m>>8&255,i[n]=i[n+256]=p,f[n]=f[n+256]=d[p%12]}},a?b.seed(a):b.seed(Math.random());var g=.5*(Math.sqrt(3)-1),e=(3-Math.sqrt(3))/6,h=1/3,k=1/6;b.simplex2=function(m,n){var p,q,r,s=(m+n)*g,v=Math.floor(m+s),u=Math.floor(n+s),A=(v+u)*e,y=m-v+A,C=n-u+A,M,D;y>C?(M=1,D=0):(M=0,D=1);var E=y-M+e,z=C-D+e,H=y-1+2*e,F=C-1+2*e;v&=255,u&=255;var N=f[v+i[u]],O=f[v+M+i[u+D]],P=f[v+1+i[u+1]],I=.5-y*y-C*C;I<0?p=0:(I*=I,p=I*I*N.dot2(y,C));var T=.5-E*E-z*z;T<0?q=0:(T*=T,q=T*T*O.dot2(E,z));var U=.5-H*H-F*F;return U<0?r=0:(U*=U,r=U*U*P.dot2(H,F)),70*(p+q+r)},b.simplex3=function(m,n,p){var q,r,s,v,u=(m+n+p)*h,A=Math.floor(m+u),y=Math.floor(n+u),C=Math.floor(p+u),M=(A+y+C)*k,D=m-A+M,E=n-y+M,z=p-C+M,H,F,N,O,P,I;D>=E?E>=z?(H=1,F=0,N=0,O=1,P=1,I=0):D>=z?(H=1,F=0,N=0,O=1,P=0,I=1):(H=0,F=0,N=1,O=1,P=0,I=1):E<z?(H=0,F=0,N=1,O=0,P=1,I=1):D<z?(H=0,F=1,N=0,O=0,P=1,I=1):(H=0,F=1,N=0,O=1,P=1,I=0);var T=D-H+k,U=E-F+k,Xa=z-N+k,Ya=D-O+2*k,Za=E-P+2*k,_a=z-I+2*k,$a=D-1+3*k,ab=E-1+3*k,bb=z-1+3*k;A&=255,y&=255,C&=255;var id=f[A+i[y+i[C]]],jd=f[A+H+i[y+F+i[C+N]]],kd=f[A+O+i[y+P+i[C+I]]],ld=f[A+1+i[y+1+i[C+1]]],ja=.6-D*D-E*E-z*z;ja<0?q=0:(ja*=ja,q=ja*ja*id.dot3(D,E,z));var ka=.6-T*T-U*U-Xa*Xa;ka<0?r=0:(ka*=ka,r=ka*ka*jd.dot3(T,U,Xa));var la=.6-Ya*Ya-Za*Za-_a*_a;la<0?s=0:(la*=la,s=la*la*kd.dot3(Ya,Za,_a));var ma=.6-$a*$a-ab*ab-bb*bb;return ma<0?v=0:(ma*=ma,v=ma*ma*ld.dot3($a,ab,bb)),32*(q+r+s+v)};function l(m){return m*m*m*(m*(m*6-15)+10)}function o(m,n,p){return(1-p)*m+p*n}return b.perlin2=function(m,n){var p=Math.floor(m),q=Math.floor(n);m=m-p,n=n-q,p=p&255,q=q&255;var r=f[p+i[q]].dot2(m,n),s=f[p+i[q+1]].dot2(m,n-1),v=f[p+1+i[q]].dot2(m-1,n),u=f[p+1+i[q+1]].dot2(m-1,n-1),A=l(m);return o(o(r,v,A),o(s,u,A),l(n))},b.perlin3=function(m,n,p){var q=Math.floor(m),r=Math.floor(n),s=Math.floor(p);m=m-q,n=n-r,p=p-s,q=q&255,r=r&255,s=s&255;var v=f[q+i[r+i[s]]].dot3(m,n,p),u=f[q+i[r+i[s+1]]].dot3(m,n,p-1),A=f[q+i[r+1+i[s]]].dot3(m,n-1,p),y=f[q+i[r+1+i[s+1]]].dot3(m,n-1,p-1),C=f[q+1+i[r+i[s]]].dot3(m-1,n,p),M=f[q+1+i[r+i[s+1]]].dot3(m-1,n,p-1),D=f[q+1+i[r+1+i[s]]].dot3(m-1,n-1,p),E=f[q+1+i[r+1+i[s+1]]].dot3(m-1,n-1,p-1),z=l(m),H=l(n),F=l(p);return o(o(o(v,C,z),o(u,M,z),F),o(o(A,D,z),o(y,E,z),F),H)},b};const Xc={map:0,renown:0,currentDay:1,posX:3,posY:3,direction:"se",elevation:void 0};async function bf(a){const b=[];for(let c=0;c<100;c++){b[c]=[];for(let d=0;d<100;d++){const j=await ia(d,c,a.rng1,a.rng2,b);a.posX===d&&a.posY===c&&(Math.ceil(j*100)===1&&(a.onABoat=!0,console.log("You are on a boat or clinging to wreckage")));const i=Wa(j);b[c][d]=i}}return b}async function Wc(){const a=[],b=Math.random(),c=Math.random(),d=Wb(b),j=Wb(c);for(let i=0;i<100;i++){a[i]=[];for(let f=0;f<100;f++){const g=await ia(f,i,d,j,a),e=Wa(g);a[i][f]=e}}return a}async function dd(){await Qb(a=>{let b=a.character.map;b===9?b=0:b++,a.character.map=b})}const Zc=10;window.onload=()=>{_c()};async function _c(){const a={worldData:[],character:Xc};for(let b=0;b<Zc;b++){const c=await Wc();a.worldData.push(c)}Yc(a)}}};return k$(17)})();
